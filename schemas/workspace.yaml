# YAML Schema for workspace configuration
# Defines structure for VS Code workspace file generation settings

$schema: "http://json-schema.org/draft-07/schema#"
title: "Workspace Configuration Schema"
description: "Schema for workspace-related configuration in .omd/ folders"
type: object

properties:
  # VS Code workspace configuration
  workspace:
    type: object
    description: "VS Code workspace file configuration"
    properties:
      # Folders to include in the workspace beyond the repository root
      additional_folders:
        type: array
        description: "Additional folders to include in workspace (relative paths)"
        items:
          type: string

      # Custom workspace settings
      settings:
        type: object
        description: "VS Code workspace-specific settings"
        additionalProperties: true

      # Recommended extensions for this workspace
      recommended_extensions:
        type: array
        description: "VS Code extensions to recommend for this workspace"
        items:
          type: string
          pattern: "^[a-zA-Z0-9-_]+\\.[a-zA-Z0-9-_]+$"
          examples:
            - ms-python.python
            - hashicorp.terraform
            - ms-vscode.vscode-typescript-next

      # Extensions that should not be recommended
      unwanted_extensions:
        type: array
        description: "VS Code extensions to exclude from recommendations"
        items:
          type: string
          pattern: "^[a-zA-Z0-9-_]+\\.[a-zA-Z0-9-_]+$"

      # Launch configurations for debugging
      launch_configurations:
        type: array
        description: "Debug launch configurations"
        items:
          type: object
          required:
            - name
            - type
          properties:
            name:
              type: string
            type:
              type: string
            request:
              type: string
              enum: [launch, attach]
            program:
              type: string
            args:
              type: array
              items:
                type: string
          additionalProperties: true

      # Tasks for build/run operations
      tasks:
        type: array
        description: "VS Code tasks configuration"
        items:
          type: object
          required:
            - label
            - type
          properties:
            label:
              type: string
            type:
              type: string
            command:
              type: string
            group:
              type: string
              enum: [build, test, clean]
            args:
              type: array
              items:
                type: string
          additionalProperties: true

    additionalProperties: false

  # GitHub Copilot instructions configuration
  copilot:
    type: object
    description: "GitHub Copilot instructions configuration"
    properties:
      # Custom instructions for this repository
      instructions:
        type: array
        description: "Custom Copilot instructions"
        items:
          type: string

      # Rules specific to this repository
      rules:
        type: array
        description: "Specific coding rules and conventions"
        items:
          type: string

      # Files to apply instructions to
      apply_to:
        type: string
        description: "Glob pattern for files to apply instructions to"
        default: "**"

    additionalProperties: false

additionalProperties: false