# YAML Schema for repository.yaml
# Defines the structure and validation rules for repository metadata

$schema: "http://json-schema.org/draft-07/schema#"
title: "Repository Metadata Schema"
description: "Schema for .omd/repository.yaml files"
type: object

required:
  - languages
  - ci_platform
  - types

properties:
  # Programming languages used in this repository
  languages:
    type: array
    description: "Programming languages and technologies used in this repository"
    minItems: 1
    items:
      type: string
      enum:
        - terraform
        - python
        - go
        - shell
        - powershell
        - sql
        - yaml
        - json
        - markdown
        - j2

  # Source control platform where this repository is hosted
  ci_platform:
    type: string
    description: "Source control and CI/CD platform"
    enum:
      - github
      - azuredevops
      - gitlab
      - bitbucket

  # Deployment platform (optional)
  deployment_platform:
    type: string
    description: "Target deployment platform or infrastructure type"
    enum:
      - aws
      - azure
      - gcp
      - kubernetes
      - onprem
      - docker
      - serverless

  # Repository types for organizational purposes
  types:
    type: array
    description: "Purpose and types of this repository (supports multiple types)"
    minItems: 1
    items:
      type: string
      enum:
        - app # Application (web, mobile, desktop)
        - lib # Library/package/module
        - infra # Infrastructure as Code
        - site # Website/documentation site
        - template # Template or boilerplate
        - tool # Tool or utility
        - config # Configuration repository
        - docs # Documentation
        - monorepo # Multi-project repository
        - example # Example/demo code

  # Optional: Generate GitHub Copilot instructions
  copilot_enabled:
    type: boolean
    description: "Whether to generate GitHub Copilot instruction files and .github folder"
    default: false

  # Optional: Additional tags for flexible categorization
  tags:
    type: array
    description: "Additional flexible tags for categorization (optional)"
    items:
      type: string
    examples:
      - frontend
      - backend
      - fullstack
      - automation
      - monitoring
      - security
      - testing
      - ci-cd
      - devops
      - ml
      - ai
      - data-science
      - analytics
      - performance
      - migration

additionalProperties: false
