# Platform-specific configuration
platform:
  {%- if platform == 'github' %}
  github:
    # GitHub Actions configuration
    actions:
      default_branch: {{ default_branch | default('main') }}
      
      # Workflow settings
      workflows:
        ci:
          triggers:
            - push
            - pull_request
          {%- if 'python' in languages %}
          python_versions: {{ python_versions | default(['3.8', '3.9', '3.10', '3.11']) | tojson }}
          {%- endif %}
          {%- if 'javascript' in languages %}
          node_version: {{ node_version | default('18') }}
          package_manager: {{ package_manager | default('npm') }}
          {%- endif %}
          {%- if 'terraform' in languages %}
          terraform_version: {{ terraform_version | default('~1.0') }}
          {%- endif %}
    
    # Repository settings
    repository:
      private: {{ private | default(false) }}
      has_issues: true
      has_projects: true
      has_wiki: {{ has_wiki | default(true) }}
      
    # Branch protection
    branch_protection:
      required_status_checks:
        strict: true
        contexts: ["{{ workflow_name | default('CI') }}"]
      enforce_admins: false
      required_pull_request_reviews:
        required_approving_review_count: 1
        dismiss_stale_reviews: true
  {%- elif platform == 'azuredevops' %}
  azuredevops:
    # Azure DevOps Pipelines configuration
    pipelines:
      trigger:
        branches:
          include:
            - {{ default_branch | default('main') }}
      
      pool:
        vmImage: 'ubuntu-latest'
    
    # Work item configuration
    work_items:
      process_template: {{ process_template | default('Agile') }}
  {%- endif %}